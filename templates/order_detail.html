{% extends 'base.html' %}

{% block title %}–ó–∞–∫–∞–∑ #{{ order.id }}{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
                    <h4 class="mb-0">–ó–∞–∫–∞–∑ #{{ order.id }}</h4>
                    <span class="badge bg-light text-dark fs-6">{{ order.get_status_display }}</span>
                </div>
                <div class="card-body">
                    
                    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä -->
                    <h5 class="mb-3">–°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</h5>
                    <div class="progress mb-4" style="height: 25px;">
                        <!-- Django Template Logic: –º–µ–Ω—è–µ–º —à–∏—Ä–∏–Ω—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞ -->
                        {% if order.status == 'new' %}
                            <div class="progress-bar bg-info" style="width: 20%">–ü—Ä–∏–Ω—è—Ç</div>
                        {% elif order.status == 'cooking' %}
                            <div class="progress-bar bg-warning" style="width: 50%">–ì–æ—Ç–æ–≤–∏—Ç—Å—è üç≥</div>
                        {% elif order.status == 'delivery' %}
                            <div class="progress-bar bg-primary" style="width: 80%">–ï–¥–µ—Ç –∫ –≤–∞–º üöó</div>
                        {% elif order.status == 'delivered' %}
                            <div class="progress-bar bg-success" style="width: 100%">–î–æ—Å—Ç–∞–≤–ª–µ–Ω ‚úÖ</div>
                        {% else %}
                             <div class="progress-bar bg-danger" style="width: 100%">–û—Ç–º–µ–Ω–µ–Ω ‚ùå</div>
                        {% endif %}
                    </div>

                    <h5 class="card-title">–î–µ—Ç–∞–ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∏</h5>
                    <p class="mb-1"><strong>–ò–º—è:</strong> {{ order.first_name }}</p>
                    <p class="mb-1"><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ order.phone_number }}</p>
                    <p class="mb-3"><strong>–ê–¥—Ä–µ—Å:</strong> {{ order.address }}</p>

                    <h5 class="card-title mt-4">–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞</h5>
                    <ul class="list-group mb-3">
                        {% for item in order.items.all %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <strong>{{ item.product.name }}</strong>
                                <small class="text-muted">x {{ item.quantity }}</small>
                            </div>
                            <span>{{ item.price }} ‚ÇΩ</span>
                        </li>
                        {% endfor %}
                    </ul>
                    
                    <h3 class="text-end">–ò—Ç–æ–≥–æ: {{ order.total_price }} ‚ÇΩ</h3>
                </div>
                <div class="card-footer text-center">
                    <a href="{% url 'index' %}" class="btn btn-outline-primary">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}